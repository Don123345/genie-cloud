extends ../layout
block styles
  link(rel='stylesheet', href=Config.ASSET_CDN + '/stylesheets/index.css')
  link(rel='stylesheet', href=Config.ASSET_CDN + '/stylesheets/app.css')
  link(rel='stylesheet', href=Config.ASSET_CDN + '/stylesheets/spinner.css')
  link(rel='stylesheet', href=Config.ASSET_CDN + '/stylesheets/conversation.css')

block scripts
  script(src=Config.ASSET_CDN + '/javascripts/commandpedia-bundle.js')
  script(src=Config.ASSET_CDN + '/javascripts/index.js')
  if ENABLE_ANONYMOUS_USER && !authenticated
    script(src=Config.ASSET_CDN + '/javascripts/conversation-bundle.js')

block page_name
  - stdlayout = false;
  = _("Almond")

block content
  if authenticated
    div#cloud-id-holder(data-cloud-id=user.cloud_id, data-auth-token=user.auth_token)

  div#page-body
    section.divider#section-heading
      div.container
          div.row
            div.col-lg-8.col-lg-offset-2
              h1#almond-title
                img(src=Config.ASSET_CDN + '/images/logo.png',style='display:inline-block;padding-right:12px;height:1em;vertical-align:bottom')
                = _("Almond")
              h2#almond-subtitle= _("The Open, Privacy-Preserving Virtual Assistant")

              p.text-center#almond-explanation-line
                = _("Almond translates your commands into a personalized program.")

              if authenticated
                div.row
                  div.col-lg-8.col-lg-offset-2
                    a(href='/me').btn.btn-primary.btn-block.call-to-action= _("Go To My Almond")
              else if !ENABLE_ANONYMOUS_USER
                div.row
                  div.col-lg-8.col-lg-offset-2
                    a(href='/user/register').btn.btn-primary.btn-block.call-to-action= _("Try Almond Now")
              else
                div.row#try-almond-now-row
                  div.col-lg-8.col-lg-offset-2
                    a#try-almond-now(href='#conversation').btn.btn-primary.btn-block.call-to-action= _("Try Almond Now")

                div.row
                  div.col-lg-12
                    div#conversation(data-target='/me/ws/anonymous',aria-expanded='false')
                      div#chat
                      div#input-block
                        span(role='button').hidden#cancel
                          span(aria-hidden='true').glyphicon.glyphicon-remove-circle
                          span.sr-only= _("Cancel")
                        form(action='#')#input-form
                          div.form-group.has-feedback#input-form-group
                            label(for='#chat-input').sr-only= _("Command:")
                            input(type='text',placeholder=_("Write your command or answer here")).form-control#input
                            //-button(type='button').btn.btn-primary#record-button= _("Say a command!")
                            span.spinner-container.form-control-feedback.hidden
                              span.spinner
                              span.sr-only= _("Almond is thinkingâ€¦")
                            span.glyphicon.glyphicon-warning-sign.form-control-feedback.hidden(title=_("Lost connection to the server."))
                            span.help-block.hidden= _("Lost connection to the server.")

              div(style='margin-top:1em;font-size:24px').text-center
                div.row
                  div.col-xs-12.col-sm-6.col-md-4.col-md-offset-2
                    a(href='/about/get-almond')= _("Get Almond")
                  div.col-xs-12.col-sm-6.col-md-4
                    a(href='/about/get-involved')= _("Contribute To Almond")
                div.row
                  div.col-xs-12.col-sm-6.col-md-4.col-md-offset-2
                    a(href='https://forms.gle/Q1m5uZDF8ZyRbdSw7', rel='noopener')= _("Sign Up for Updates")
                  div.col-xs-12.col-sm-6.col-md-4
                    a(href='https://community.almond.stanford.edu')= _("Join Our Community")

    div.sections#home-page-sections
      section.divider#section-commandpedia
        h3= _("What can Almond do?")
        div.container
          div.row
            div.col-xs-12.col-md-6.col-md-offset-3
              p= _("Here is a sample of what Almond can do, and a few commands that our users and developers think are interesting. It is not an exhaustive list! Commands can combined, creating endless possibilities for your assistant.")
          include ../commandpedia.pug
